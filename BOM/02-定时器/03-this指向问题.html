<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>this指向问题</title>
  </head>
  <body>
    <button>点击</button>
    <script>
      // this指向问题一般情况下是this最终指向的是那个调用它的对象

      //   1.全局作用域或者普通函数中this指向全局对象window（注意定时器里面的this指向window）
      // 全局作用域指向：window
      console.log(this); //1. 全局作用域：window
      // 普通函数指向：window
      function fn() {
        console.log(this);
      }
      fn(); //window
      // 定时器指向：window
      setTimeout(function () {
        console.log(this); //window
      }, 1000);

      // ---------------------------------------
      //   2.方法调用中谁调用this指向谁
      // 调用对象方法指向：对象
      var o = {
        sayHi: function () {
          console.log(this); //this指向的是o这个对象
        },
      };
      o.sayHi(); //o这个对象

      //   /----------------------------------------

      // 点击事件指向绑定的点击元素
      var btn = document.querySelector("button");
      //   btn.onclick = function () {
      //     console.log(this); //指向button
      //   };
      btn.addEventListener("click", function () {
        console.log(this); //指向button
      });

      // 3.构造函数中this指向构造函数的实例:指向实例函数
      function Fn() {
        console.log(this); //this：new一下开辟新的空间，this指向的是这个空间。又因为把这个空间赋值给了fun，所以最终指向的就是fun
      }
      var fun = new Fn("小明"); //指向实例对象(Fn对象里包含元素)
    </script>
  </body>
</html>
