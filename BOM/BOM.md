# BOM

### 概述

**浏览器对象模型：顶级对象是window** 

![img](https://cdn.nlark.com/yuque/0/2023/png/33610899/1675844122791-ac14593c-ce6c-4c6b-ae6d-7426c86b1397.png)

* 注意声名变量时候不用name：因为name属于window的一个属性
* window里还包含很多属性和方法：
  * 例如：alert（）、prompt（）
  * 还包含许多：通过console.dir可以查看到

**1. 窗口加载事件**

当前页面加载完成之后才能执行里面的程序

1. window.**onload** = function(){执行程序} : 注意冲突多个窗口加载程序会执行最后一个加载程序
2. window.addEventListener('**load**',function(){执行程序}) 多个执行程序不会冲突，根据文档代码依次执行
3. window.addEvrntListener('DOMContentLoad',function(){执行程序})：dom完全加载完成就可以执行

**2.调整窗口大小**

* **窗口大小事件：resize** 
* window.innerWidth:窗口宽度
* window.innerHeight：窗口高度

>  window.addEventListener("resize", function () {
>
> ​          console.log("变化");
>
> ​          // 获取到窗口宽高值
>
> ​          console.log(window.innerWidth);
>
> ​          console.log(window.innerHeight);
>
> ​          if (window.innerWidth <= 800) {
>
> ​            div.style.display = "none";
>
> ​          } else {
>
> ​            div.style.display = "block";
>
> ​          }
>
> ​        });

**3.定时器**

**定时器（不重复）**

1. setTimeout（'调用函数'，延迟时间）

   1. window可以省略
   2. 延迟时间单位毫秒，可以省略单位
   3. 函数调用写法：
      1. 直接写函数function（）{}
      2. 写函数名（在外面声明函数）
      3. 运用字符串：'函数名（）'
   4. **案例-消失广告**
      1. 获取广告
      2. 定义函数：让广告图消失
      3. 定时器（调用函数，延迟时间）

2. clearTimeout（定时器名）：暂停定时器：使用在触发事件

   ***

**定时器（重复）**

1. setInterval（'调用函数'，延迟时间）
   1. window可以省略
   2. 延迟时间单位毫秒，可以省略单位
   3. 函数调用写法：
      1. 直接写函数function（）{}
      2. 写函数名（在外面声明函数）
      3. 运用字符串：'函数名（）'
   4. **定时器-倒计时**
      1. 获取到标签
      2. 声名结束时间
      3. 执行一次时间变化函数
      4. 开启定时器（执行函数，间隔时间）
      5. 声名时间变化函数
         1. 获取现在时间
         2. 间隔时间=结束时间-现在时间 /1000
         3. 声名小时剩余多少
         4. 利用三元运算符给前面补0
         5. 给获取元素赋值小时
         6. 分钟秒依次往下同理。。。。
2. clearInterval（定时器名）暂停定时器：使用在触发事件

* 注意：每个定时器前面都可以自定义名字  用来暂停定时器来使用
* **案例**：**短信发送倒计时**：
  * 获取按钮元素
  * 声明一个计时器
  * 设置点击事件：初始的点击效果disabled = true
  * 计时器效果：（1000毫秒）
    * 判断计时器
    * ==0
    * 如果是清除计时器效果：点击效果disabled=false；按钮内容是发送；计时器重新恢复最开始值
    * 如果计时器！==0
    * 执行btn的innerHTML=还剩下timer秒
    * 计时器--

4. **this指向**
   1. 指向window：
      1. 相对于window全局作用域
      2. 普通函数相对于window直接执行
      3. 定时器回调函数相对于window执行
   2. 指向对象：直接调用对象方法
   3. 指向事件绑定者：绑定事件之后的回调函数
   4. 指向实例对象：构造函数实例化对象

5. **js机制**
   1. **同步：**执行顺序和代码排列顺序相同
   2. **异步：**在执行到某一个函数时候出现回调函数需要异步处理
      1. **事件**
      2. **加载、窗口大小**
      3. **定时器**
   3. **多个异步任务处理**
      1. 首先处理同步任务在**执行栈**中处理
      2. 在执行**执行栈**时候出现的异步任务发送到**异步任务处理**
      3. **异步任务处理**判断是否触发**事件、加载、定时器**
      4. 如果出发就排列到**异步任务队列**中
      5. 在任务栈中同步任务执行完成之后把任务队列的异步任务依次发送给任务栈进行执行
   4. **事件循环**：同步任务执行栈重复查看异步任务队列中是否存在需要执行的任务
6. **location对象**
   1. 获取到URL对象：window.loaction.href

![img](https://cdn.nlark.com/yuque/0/2023/png/33610899/1676715862884-4cd4964f-2606-48ea-a62a-1ba9581f8d4e.png)

  2. **location对象属性**

     ![img](https://cdn.nlark.com/yuque/0/2023/png/33610899/1676716111532-6008c28e-4cbb-428b-ad64-c0f8e36f3659.png)

     		1. **案例：倒计时跳转页面：location.href搭配定时器**
          		1. 获取元素butn和div
          		2. 设置点击事件
               		1. 设置好计时器（倒计时）
               		2. 先调用一次：防止不流畅
               		3. 设置定时器（函数名，1000）
               		4. 函数：判断（计时器是否为0）
                    		1. 是则跳转到新的页面
                    		2. 不是则改变div的内容并执行计时器--
     		2. **案例：location对象获取URL元素**
          		1. 设置内容页面：
               		1. 表单域传入到指定接收文件文件
               		2. 定义好名字：uname
          		2. 设置接收文件（**search属性**）：
               		1. 设置html有一个div标签
               		2. 得到传入的URL元素字符串去除问号：使用substr（从1开始）内置对象去除
               		3. 将得到的字符串uname=自己输入的
               		4. 通过字符串转换成数组：字符串.split（'替换符号='）
               		5. 最后改变div的内容
     		3. **location对象的方法**![img](https://cdn.nlark.com/yuque/0/2023/png/33610899/1676735604689-2b417f88-45ea-4e38-a869-541aa019d422.png)

* 记录访问历史：assign

* 不记录历史：replace

* 刷新：reload

  

7. **navigator对象**：获取设备系统版本以及浏览器的版本
   	1. **navigator.useAgent.match**：判断是pc还是匹配哪一个移动
    	2. 如果是移动设备搭配location跳转到移动页面
    	3. 如果是pc设备搭配location跳转到pc页面
 8. **history对象**
     1. 与历史记录进行交互

![img](https://cdn.nlark.com/yuque/0/2023/png/33610899/1676808491693-6b13b08d-d3fd-4475-a083-d3434e55c0c8.png)



​		**2. 案例：跳转之后可以前进可以后退**

> * 设置两个页面互相链接
> * 前进页面
>   * 获取到按钮之后设置点击事件：
>     * 利用haistory.forward();
>     * 利用history.go(1)
> * 后退页面
>   - 获取到按钮之后设置点击事件：
>     - 利用haistory.back();
>     - 利用history.go(-1)